import React, { useState, useEffect } from "react";
import axios from "axios";
import './pricesAndInfo.css';
import Button from "../button/button";

function PricesAndInfo() {
  const [prices, setPrices] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –∫ –º–∞—Ä—à—Ä—É—Ç—É –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö
    axios.get(`http://localhost:3001/prices`)
      .then(response => {
        // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–µ–Ω, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        setPrices(response.data);
        setLoading(false);
      })
      .catch(error => {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö:', error);
        setError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.');
        setLoading(false);
      });
  }, []); // [] –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ useEffect –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

  // –ï—Å–ª–∏ –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
  if (loading) {
    return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>;
  }

  // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
  if (error) {
    return <div>–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ü–µ–Ω–∞—Ö</div>;
  }

  // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Ö
  if (prices) {
    return (
      <div className="prices-and-info" id="price">
        <div className="prices">
          <h2 className="price-header">–¶–µ–Ω—ã :</h2>
          <div className="price-item">
            <h3>–≠–Ω–¥—É—Ä–æ :</h3>
            <p>{prices.enduro.hourly["1_hour"]} —Ä—É–±. –∑–∞ 1 —á–∞—Å</p>
            <p>{prices.enduro.hourly["2_hours"]} —Ä—É–±. –∑–∞ 2 —á–∞—Å–∞ (—Å–ª–µ–¥—É—é—â–∏–µ —á–∞—Å—ã –ø–æ {prices.enduro.hourly.additional_hour} —Ä—É–±.)</p>
            <p>{prices.enduro.hourly.full_day} —Ä—É–±. - –≤–µ—Å—å –¥–µ–Ω—å (—Å 10:00 –¥–æ 20:00)</p>
          </div>
          <div className="price-item">
            <h3>–ü–∏—Ç–±–∞–π–∫–∏ :</h3>
            <p>{prices.pitbikes.hourly["1_hour"]} —Ä—É–±. –∑–∞ 1 —á–∞—Å</p>
            <p>{prices.pitbikes.hourly["2_hours"]} —Ä—É–±. –∑–∞ 2 —á–∞—Å–∞ (—Å–ª–µ–¥—É—é—â–∏–µ —á–∞—Å—ã –ø–æ {prices.pitbikes.hourly.additional_hour} —Ä—É–±.)</p>
            <p>{prices.pitbikes.hourly.full_day} —Ä—É–±. - –≤–µ—Å—å –¥–µ–Ω—å (—Å 10:00 –¥–æ 20:00)</p>
          </div>
        </div>
        <div className="safety-info">
          <h2>–ú—ã –∑–∞–±–æ—Ç–∏–º—Å—è –æ –≤–∞—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</h2>
          <p>üìå–ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç –∑–∞—â–∏—Ç–Ω–æ–π —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –ø–æ —Ç–µ—Ö–Ω–∏–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –≤–∞—à—É –∑–∞—â–∏—Ç—É!</p>
          <p>‚ö†Ô∏è–í–Ω–∏–º–∞–Ω–∏–µ: –£—á–∞—Å—Ç–∏–µ –≤ –º–æ—Ç–æ—Ç—É—Ä–∞—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏—Ü–∞–º —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç. –í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –≤—ã –º–æ–ª–æ–∂–µ 18 –ª–µ—Ç, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ª–∏—á–∏–µ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–ª–∏ –∑–∞–∫–æ–Ω–Ω—ã—Ö –æ–ø–µ–∫—É–Ω–æ–≤ –≤–æ –≤—Ä–µ–º—è –º–æ—Ç–æ–ø–æ–µ–∑–¥–∫–∏.</p>
          <p>üö¶ –ö–∞—Ç–µ–≥–æ—Ä–∏—è "–ê" –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ –Ω–∞—à–∏—Ö –º–æ—Ç–æ—Ç—É—Ä–∞—Ö, —Ç–∞–∫ —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –æ–ø—ã—Ç–∞ –≤–æ–∂–¥–µ–Ω–∏—è –º–æ—Ç–æ—Ü–∏–∫–ª–∞, –Ω–µ –±–µ—Å–ø–æ–∫–æ–π—Ç–µ—Å—å, –º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–º –≤–∞–º –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É!</p>
          <Button />
        </div>
      </div>
    );
  }

  // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
  return <div>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>;
}

export default PricesAndInfo;



